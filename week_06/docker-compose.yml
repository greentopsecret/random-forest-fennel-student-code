version: '3'
services:

  mongodb:
    image: mongo:5.0.3
    volumes:
      - ./mongodb/data/db/:/data/db
    ports:
    - 27017:27017

  crawler-app:
    build:
      dockerfile: docker/Dockerfile
      context: crawler-app/
    working_dir: /app/
    volumes:
    - ./crawler-app/app/:/app
    depends_on:
    - mongodb
    - ebay-mock

  ebay-mock:
    image: openjdk:11
    working_dir: /app
    hostname: ebay-mock
    command: "java -jar ./karate.jar -m /app/features/search.feature -p 80"
    volumes:
        - ./ebay-mock/app:/app